<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Services</title>

    <style>
        body{
            margin:0;
            font-family: Arial, sans-serif;
            background:#0b0e17;
            color:#fff;
            min-height:100vh;
        }

        .nav{
            display:flex;
            justify-content:space-between;
            align-items:center;
            padding:14px 22px;
            border-bottom:1px solid rgba(255,255,255,0.10);
            background: rgba(10, 12, 20, 0.55);
            backdrop-filter: blur(12px);
        }

        .brand{
            font-weight:800;
            letter-spacing:0.2px;
            font-size:18px;
        }

        .nav a{
            color:#fff;
            text-decoration:none;
            margin-left:16px;
            font-weight:600;
            opacity:.85;
        }

        .nav a:hover{ opacity:1; }

        .container{
            max-width: 1000px;
            margin: 0 auto;
            padding: 24px 20px 40px;
        }

        .headerRow{
            display:flex;
            justify-content:space-between;
            align-items:flex-end;
            gap: 14px;
            flex-wrap: wrap;
            margin-bottom: 14px;
        }

        h1{
            margin:0;
            font-size: 26px;
        }

        .sub{
            margin:6px 0 0;
            color: rgba(255,255,255,0.65);
            line-height:1.5;
        }

        .btn{
            display:inline-block;
            padding: 11px 14px;
            border-radius: 12px;
            text-decoration:none;
            font-weight: 800;
            font-size: 14px;
            text-align:center;
            color: #0b0e17;
            background: linear-gradient(135deg, #7c5cff, #4de0c3);
            white-space: nowrap;
        }

        .btn.secondary{
            background: rgba(255,255,255,0.12);
            color:#fff;
            border:1px solid rgba(255,255,255,0.18);
        }

        .grid{
            margin-top: 16px;
            display:grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .card{
            border:1px solid rgba(255,255,255,0.12);
            background: rgba(255,255,255,0.06);
            border-radius: 16px;
            padding: 18px;
            box-shadow: 0 10px 26px rgba(0,0,0,0.25);
            transition: transform 160ms ease, background 160ms ease, border 160ms ease;
        }

        .card:hover{
            transform: translateY(-2px);
            background: rgba(255,255,255,0.09);
            border-color: rgba(255,255,255,0.22);
        }

        .tagRow{
            display:flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .tag{
            display:inline-block;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.16);
            background: rgba(255,255,255,0.06);
            color: rgba(255,255,255,0.75);
            font-size: 12px;
            font-weight: 800;
        }

        .title{
            margin:0 0 8px;
            font-size: 16px;
            font-weight: 800;
        }

        .desc{
            margin:0;
            color: rgba(255,255,255,0.65);
            line-height: 1.5;
            font-size: 14px;
        }

        .meta{
            margin-top: 12px;
            display:flex;
            gap: 10px;
            flex-wrap: wrap;
            color: rgba(255,255,255,0.55);
            font-size: 13px;
            font-weight: 700;
        }

        .empty{
            margin-top: 18px;
            border:1px dashed rgba(255,255,255,0.18);
            background: rgba(255,255,255,0.04);
            border-radius: 16px;
            padding: 18px;
            color: rgba(255,255,255,0.65);
            line-height:1.5;
        }

        .actions{
            margin-top: 14px;
            display:flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .actions form{
            display:inline;
        }

        @media (max-width: 900px){
            .grid{ grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="nav">
    <div class="brand">My Services</div>
    <div>
        <a href="/coach/dashboard">Dashboard</a>
        <a href="/">Home</a>
    </div>
</div>

<div class="container">

    <div class="headerRow">
        <div>
            <h1>My Services</h1>
            <p class="sub">These are the services you’ve published. Add more anytime.</p>
        </div>
        <div style="display:flex; gap:10px;">
            <a class="btn secondary" href="/coach/dashboard">Back</a>
            <a class="btn" href="/coach/services/new">+ Create Service</a>
        </div>
    </div>

    <!-- Empty state -->
    <div class="empty" th:if="${services == null or #lists.isEmpty(services)}">
        <b>You don’t have any services yet.</b><br>
        Click <b>Create Service</b> to post your first one (Tennis, Piano, Basketball, anything).
    </div>

    <!-- Services list -->
    <div class="grid" th:if="${services != null and !#lists.isEmpty(services)}">
        <div class="card" th:each="s : ${services}">

            <div class="tagRow">
                <span class="tag" th:text="${s.category}">CATEGORY</span>
            </div>

            <h3 class="title" th:text="${s.title}">Service Title</h3>

            <p class="desc"
               th:text="${#strings.length(s.description) > 160 ? #strings.substring(s.description, 0, 160) + '…' : s.description}">
                Service description preview...
            </p>

            <div class="meta">
                <div th:text="${s.price + '/hr'}">Price/hr</div>
            </div>

            <div class="actions">
                <a class="btn secondary" th:href="@{/coach/services/{id}/edit(id=${s.id})}">Edit</a>

                <form th:action="@{/coach/services/{id}/delete(id=${s.id})}" method="post" style="margin:0;">
                    <!-- REQUIRED for Spring Security POST -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button class="btn secondary" type="submit">Delete</button>
                </form>
            </div>

        </div>
    </div>

</div>

</body>
</html>
